<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You üíñ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
    
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #fce4ec; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏≠‡πà‡∏≠‡∏ô */
            min-height: 100vh;
            /* FIX Mobile: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£ scroll ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏ó‡∏µ‡πà body */
            overflow-x: hidden;
            /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏∞‡∏ã‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏π‡∏°‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            touch-action: manipulation; 
        }
        .code-font { font-family: 'Fira Code', monospace; }
        .font-kanit { font-family: 'Kanit', sans-serif; }

        /* --- 1. CSS ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Pixel Heart) --- */
        #entry-screen {
            background-color: #fce4ec;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            padding: 1rem;
            flex-wrap: wrap;
            position: absolute; 
            inset: 0;
            z-index: 50;
            transition: opacity 0.5s ease-out; 
            overflow: hidden;
        }
        
        /* Pixel Heart (Uiverse.io by anandita-3217) */
        .heart {
            display: inline-grid;
            grid-template-columns: repeat(13, 20px);
            grid-template-rows: repeat(11, 20px);
            gap: 1px;
            padding: 20px;
            animation: heartbeat 2s infinite ease-in-out;
            cursor: pointer;
            flex-shrink: 0; 
        }
        /* Mobile adjustment for heart */
        @media (max-width: 640px) {
            .heart {
                transform: scale(0.8);
            }
        }

        .pixel { width: 100%; height: 100%; transition: all 0.3s ease; transform: scale(1); }
        .pixel.pink { background: #e63946; animation: pinkPulse 2.5s infinite ease-in-out; }
        .pixel.soft-pink { background: #f1a1b4; animation: softPinkPulse 2.2s infinite ease-in-out; }
        .pixel.white { background: #ffeaea; animation: whitePulse 2.8s infinite ease-in-out; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        @keyframes pinkPulse { 0%, 100% { background: #ff6b81; transform: scale(1); box-shadow: 0 0 0 rgba(230, 57, 70, 0); } 50% { background: #e63946; transform: scale(1.05); box-shadow: 0 0 10px rgba(230, 57, 70, 0.6); } }
        @keyframes softPinkPulse { 0%, 100% { background: #e63946; transform: scale(1); box-shadow: 0 0 0 rgba(241, 161, 180, 0); } 50% { background: #f1a1b4; transform: scale(1.05); box-shadow: 0 0 8px rgba(241, 161, 180, 0.6); } }
        @keyframes whitePulse { 0%, 100% { background: #ffe3e3; transform: scale(1); box-shadow: 0 0 0 rgba(255, 234, 234, 0); } 50% { background: #ffeaea; transform: scale(1.05); box-shadow: 0 0 15px rgba(255, 234, 234, 0.8); } }

        /* Loading SVG (Uiverse.io by RaspberryBee) */
        .loading { flex-shrink: 0; }
        .loading svg polyline { fill: none; stroke-width: 3; stroke-linecap: round; stroke-linejoin: round; }
        .loading svg polyline#back { fill: none; stroke: #ff99aa; }
        .loading svg polyline#front { fill: none; stroke: #e63946; stroke-dasharray: 48, 144; stroke-dashoffset: 192; animation: dash_682 1.4s linear infinite; }
        @keyframes dash_682 { 72.5% { opacity: 0; } to { stroke-dashoffset: 0; } }
        
        /* Cat Loader CSS */
        .cat-loader-wrapper {
            width: fit-content;
            height: fit-content;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: absolute;
            bottom: 8vh; 
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        .catContainer { width: 100%; height: fit-content; display: flex; align-items: center; justify-content: center; position: relative; transform: scale(0.8); }
        .catbody { width: 80px; }
        .catbody path { fill: #ff6b81 !important; }
        .tail { position: absolute; width: 17px; top: 50%; animation: tail 0.5s ease-in infinite alternate-reverse; transform-origin: top; }
        .tail path { fill: #e63946 !important; }
        @keyframes tail { 0% { transform: rotateZ(60deg); } 50% { transform: rotateZ(0deg); } 100% { transform: rotateZ(-20deg); } }
        .text { display: flex; flex-direction: column; width: 50px; position: absolute; margin: 0px 0px 100px 120px; }
        .zzz, .bigzzz { color: #e63946; font-weight: 700; font-size: 15px; animation: zzz 2s linear infinite; }
        .bigzzz { font-size: 25px; margin-left: 10px; animation: zzz 2.3s linear infinite; }
        @keyframes zzz { 0% { color: transparent; } 50% { color: #e63946; } 100% { color: transparent; } }

        /* --- 2. CSS ‡∏´‡∏ô‡πâ‡∏≤ Terminal --- */
        #terminal-screen {
            background-color: #fce4ec;
            color: #333333;
            min-height: 100vh;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .cursor-blink { animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* ‡∏õ‡∏∏‡πà‡∏° Run */
        .run-button {
            font-family: 'Fira Code', monospace;
            background-color: #ffc0cb;
            color: #1a1a1a;
            padding: 12px 24px; 
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(255, 175, 200, 0.5);
            border: 2px solid #fff;
        }
        .run-button:hover {
            background-color: #ffafc2;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 175, 200, 0.7);
        }

        /* Floating Button Container (‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á) */
        #floating-button-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 90;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }

        /* --- 3. CSS Loading Animations --- */
        .loader-text {
            font-family: "Kanit", sans-serif;
            background-image: linear-gradient(90deg, #ff0037 0%, #ff2c7d 10%);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
            position: relative;
        }
        .loader-text::after, .loader-text::before {
            content: "";
            display: block;
            width: 100%;
            height: 2px;
            background-color: #ff2c7d;
            box-shadow: 0 0 10px rgba(230, 169, 169, 0.316);
            margin: 1rem auto;
        }
        
        /* --- 4. CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gallery --- */
        .gallery-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        .gallery-image-wrapper {
            position: relative;
            width: 90%;
            min-height: 300px; 
            background-color: #fff;
            border-radius: 8px;
            border: 2px solid #e63946;
            overflow: hidden; 
            display: flex;
            justify-content: center;
            background: #000;
        }
        .gallery-image {
            width: 100%;
            height: 100%;
            max-height: 450px;
            object-fit: contain; 
            display: block;
            opacity: 0; 
            transition: opacity 0.3s ease;
        }
        .gallery-loader {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            color: #e63946;
            font-family: 'Kanit', sans-serif;
            font-size: 1.2rem;
            z-index: 10;
            flex-direction: column; 
            gap: 15px;
        }
        
        .gallery-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            width: 100%;
        }
        .gallery-button {
            background: #fff;
            color: #e63946;
            border: 1px solid #e63946;
            border-radius: 5px;
            padding: 8px 16px;
            font-weight: 600;
            font-family: 'Fira Code', monospace;
        }
        .gallery-button:disabled {
            background: #f0f0f0;
            color: #aaa;
            border-color: #ccc;
            cursor: not-allowed;
        }
        .gallery-counter { color: #e63946; font-size: 0.9rem; }

        /* --- Fancy Carousel Loader --- */
        .loader-fancy { display: flex; position: relative; justify-items: center; align-items: center; gap: 1rem; height: 55px; width: 200px; overflow: hidden; }
        .loader-fancy .container { width: 100%; display: flex; flex-direction: column; height: 200px; position: relative; align-items: center; }
        .carousel { display: flex; gap: 1rem; flex-direction: column; position: absolute; width: 100%; transform-origin: center; animation-delay: 2s; }
        .loader-fancy .container:nth-child(3) { justify-content: flex-start; justify-items: flex-start; animation: scroll-up 4s infinite ease-in-out; animation-delay: 3s; }
        .loader-fancy .container:nth-child(2) { justify-content: flex-end; justify-items: flex-end; animation: scroll-down 4s infinite ease-in-out; animation-delay: 3s; }
        .loader-fancy .container:nth-child(1) { justify-content: flex-end; justify-items: flex-end; animation: scroll-down 3s infinite ease-in-out; animation-delay: 3s; }
        .love { background: #ff2c7d; display: flex; width: 30px; height: 30px; position: relative; align-items: center; justify-content: center; left: 8px; margin: 0.8rem 4px; transform: rotate(45deg); animation-delay: 2s; }
        .love::before, .love::after { content: ''; position: absolute; width: 30px; height: 30px; border-radius: 50%; background: #ff2c7d; }
        .love::before { left: -16px; } .love::after { top: -16px; }
        .death { display: flex; width: 100%; height: 55px; position: relative; align-items: center; justify-content: center; animation: rotation 3s infinite ease-in-out; animation-delay: 1s; }
        .death:after { content: ''; height: 63px; position: absolute; border-left: 12px solid #e63946; transform: rotate(45deg); border-radius: 8px; top: -4px; }
        .death:before { content: ''; height: 60px; position: absolute; border-left: 12px solid #e63946; transform: rotate(-45deg); }
        .robots { display: flex; width: 100%; height: 55px; justify-content: space-between; background-color: #e63946; border-radius: 0 8px 8px; padding: 8px; animation-delay: 5s; }
        .robots::after, .robots::before { content: ''; width: 12px; height: 12px; top: 0; left: 0; background-color: #ffffff; border-radius: 50%; animation-delay: 2s; animation: blink 0.5s 2 forwards; }
        @keyframes scroll-up { 0% { transform: translateY(0); filter: blur(0); } 30% { transform: translateY(-150%); filter: blur(10px); } 60% { transform: translateY(0); filter: blur(0px); } }
        @keyframes scroll-down { 0% { transform: translateY(0); filter: blur(0); } 30% { transform: translateY(150%); filter: blur(10px); } 60% { transform: translateY(0); filter: blur(0px); } }
        @keyframes rotation { 20%, 100% { transform: rotate(180deg); } }
        @keyframes blink { 0% { height: 0; } 20% { height: 12px; } 100% { height: 12px; } }

        /* --- 5. Final Loading Animation --- */
        .heartbeatloader-container { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #e63946; padding-top: 50px; }
        .simple-heart-loader { position: relative; width: 40px; height: 60px; margin: 50px auto 0; animation: heartBeat 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1); }
        .simple-heart-loader:before, .simple-heart-loader:after { content: ""; background: #e63946; width: 40px; height: 60px; border-radius: 50px 50px 0 0; position: absolute; left: 0; bottom: 0; transform: rotate(45deg); transform-origin: 50% 100%; box-shadow: 5px 4px 5px rgba(0, 0, 0, 0.1) inset; }
        .simple-heart-loader:after { transform: rotate(-45deg); }
        @keyframes heartBeat { 0% { transform: scale(0.95); } 5% { transform: scale(1.1); } 39% { transform: scale(0.85); } 45% { transform: scale(1); } 60% { transform: scale(0.95); } 100% { transform: scale(0.9); } }

        /* --- 6. Final Card --- */
        .card-container { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; padding: 20px; }
        .card { padding: 20px; width: 330px; min-height: 370px; border-radius: 20px; background: #212121; box-shadow: 5px 5px 8px #1b1b1b, -5px -5px 8px #272727; transition: 0.4s; margin: 0 auto; }
        .card:hover { translate: 0 -10px; }
        .card-title { font-size: 18px; font-weight: 600; color: #ffc0cb; margin: 15px 0 0 0; text-align: center; }
        .card-image { min-height: 170px; background-color: #313131; border-radius: 15px; background: #313131; box-shadow: inset 5px 5px 3px #2f2f2f, inset -5px -5px 3px #333333; display: flex; align-items: center; justify-content: center; }
        .card-body { margin: 13px 0 0 0; color: rgb(184, 184, 184); font-size: 15px; text-align: center; white-space: pre-wrap; }
        .footer { margin: 28px 0 0 0; font-size: 13px; color: #b3b3b3; text-align: right; }
        .by-name { font-weight: 700; color: #ffc0cb; }

        /* --- Mobile Fixes --- */
        @media (max-width: 640px) {
            .loading { display: none; } /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏µ‡∏û‡∏à‡∏£ */
            
            /* ASCII Art Resize */
            .text-pink-600.whitespace-pre {
                font-size: 0.55rem !important; 
                line-height: 0.8rem !important;
            }

            .gallery-image { max-height: 300px; }
            #floating-button-container { bottom: 20px; right: 20px; }
            .card { width: 90%; padding: 15px; }
            .loader-fancy { transform: scale(0.8); }
        }
        
        /* --- Animation for Modal Shake --- */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake {
            animation: shake 0.3s ease-in-out;
        }

    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <div id="fancyLoaderTemplate" class="hidden">
        <div class="loader-fancy">
            <div class="container"><div class="carousel"><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div></div></div>
            <div class="container"><div class="carousel"><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div></div></div>
            <div class="container"><div class="carousel"><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div></div></div>
        </div>
    </div>
    
    <div id="security-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/50 backdrop-blur-sm px-4">
        <div id="modal-content" class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm text-center border-4 border-pink-200 transform transition-all scale-100">
            <div class="mb-4 text-5xl">üîê</div>
            <h3 class="text-2xl font-bold text-pink-500 mb-2 font-kanit">Security Check</h3>
            <p id="modal-prompt" class="text-gray-600 mb-6 font-kanit"></p>
            <input type="text" id="modal-input" class="w-full border-2 border-pink-200 rounded-lg px-4 py-2 text-center focus:outline-none focus:border-pink-400 font-kanit mb-2 text-black" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
            <p id="modal-error" class="text-red-500 text-sm mb-4 hidden font-kanit">‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞</p>
            <button id="modal-submit" class="w-full bg-pink-300 hover:bg-pink-400 text-white font-bold py-2 px-4 rounded-lg transition-colors font-kanit">
                ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
            </button>
        </div>
    </div>

    <div id="entry-screen">
        <div class="loading">
            <svg height="48px" width="64px">
                <polyline id="back" points="0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"></polyline>
                <polyline id="front" points="0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"></polyline>
            </svg>
        </div>
        
        <div class="heart" id="heart-button">
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div>
            <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div>
            <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div>
            <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div>
            <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel white"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel soft-pink"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div>
            <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel pink"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div> <div class="pixel"></div>
        </div>
        
        <div class="loading" id="loading-right">
            <svg height="48px" width="64px">
                <polyline id="back" points="0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"></polyline>
                <polyline id="front" points="0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"></polyline>
            </svg>
        </div>

        <div class="cat-loader-wrapper">
            <div class="catContainer">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 733 673" class="catbody">
                    <path fill="#ff6b81" d="M111.002 139.5C270.502 -24.5001 471.503 2.4997 621.002 139.5C770.501 276.5 768.504 627.5 621.002 649.5C473.5 671.5 246 687.5 111.002 649.5C-23.9964 611.5 -48.4982 303.5 111.002 139.5Z"></path>
                    <path fill="#ff6b81" d="M184 9L270.603 159H97.3975L184 9Z"></path>
                    <path fill="#ff6b81" d="M541 0L627.603 150H454.397L541 0Z"></path>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 158 564" class="tail">
                    <path fill="#e63946" d="M5.97602 76.066C-11.1099 41.6747 12.9018 0 51.3036 0V0C71.5336 0 89.8636 12.2558 97.2565 31.0866C173.697 225.792 180.478 345.852 97.0691 536.666C89.7636 553.378 73.0672 564 54.8273 564V564C16.9427 564 -5.4224 521.149 13.0712 488.085C90.2225 350.15 87.9612 241.089 5.97602 76.066Z"></path>
                </svg>
                <div class="text">
                    <span class="bigzzz">üíñ</span> <span class="zzz">üíñ</span>
                </div>
            </div>
        </div>
    </div>

    <div id="terminal-screen" class="hidden h-full flex flex-col">
        <div class="bg-gray-100 p-3 flex justify-start items-center gap-2 border-b border-gray-300 text-sm select-none sticky top-0 z-40">
            <div class="w-3 h-3 rounded-full bg-red-500"></div>
            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
            <div class="w-3 h-3 rounded-full bg-green-500"></div>
            <div class="ml-4 text-gray-500">HNY_Surprise.exe</div>
        </div>

        <div id="terminal" class="flex-1">
            </div>
    </div>
    
    <div id="floating-button-container" class="hidden">
        </div>

    <audio id="bg-music" src="https://files.catbox.moe/wpxsyq.mp3" loop></audio>

    <script>
        const entryScreen = document.getElementById('entry-screen');
        const heartButton = document.getElementById('heart-button');
        const terminalScreen = document.getElementById('terminal-screen');
        const terminal = document.getElementById('terminal');
        const inputArea = document.getElementById('floating-button-container');
        const bgMusic = document.getElementById('bg-music');
        
        // Modal Elements
        const modal = document.getElementById('security-modal');
        const modalInput = document.getElementById('modal-input');
        const modalSubmit = document.getElementById('modal-submit');
        const modalPrompt = document.getElementById('modal-prompt');
        const modalError = document.getElementById('modal-error');
        const modalContent = document.getElementById('modal-content');

        let currentStep = 0;
        let audioReady = false; 
        let audioSetupPromise = null; 
        let connectSound, errorSound, successSound, chimeSound;

        // --- Story Config ---
        const storySteps = [
            { type: 'connect', buttonText: '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠', resultText: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏ô‡πÑ‡∏Å‡∏• :)' },
            { type: 'message', buttonText: '‡∏£‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥', resultText: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏õ‡∏µ 2025... ‡∏û‡∏ö 6 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...' },
            {
                type: 'gallery',
                buttonText: '‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ',
                images: [
                    'https://files.catbox.moe/3hryre.jpg',
                    'https://files.catbox.moe/fzvku9.jpg',
                    'https://files.catbox.moe/p6ftp0.JPG',
                    'https://files.catbox.moe/a3742g.PNG',
                    'https://files.catbox.moe/wbsesd.jpg',
                    'https://files.catbox.moe/9rlltx.jpg'
                ]
            },
            { type: 'message', buttonText: '‡∏î‡∏π‡∏ï‡πà‡∏≠', resultText: '‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏à‡∏∞‡πÑ‡∏Å‡∏•... ‡πÅ‡∏ï‡πà‡∏£‡∏π‡πâ‡∏°‡∏±‡πâ‡∏¢‡∏ß‡πà‡∏≤...' },
            { 
                type: 'ascii',
                buttonText: '‡∏ß‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å',
                asciiArt: [
                    '‚¨ú‚¨úüå∏‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨úüå∏‚¨ú‚¨ú',
                    '‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨úüå∏‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú',
                    '‚¨ú‚¨ú‚¨ú‚¨õ‚¨õ‚¨õ‚¨úüå∏‚¨ú‚¨õ‚¨õ‚¨õ‚¨ú‚¨ú‚¨ú',
                    '‚¨ú‚¨ú‚¨õüå∏üå∏üå∏‚¨õ‚¨ú‚¨õüå∏üå∏üå∏‚¨õ‚¨ú‚¨ú',
                    '‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏‚¨õüå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú',
                    '‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏‚¨õüå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú',
                    '‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú',
                    '‚¨ú‚¨õüå∏üå∏   ùêåùóÇùóåùóå ùêò‚±∫œÖ   üå∏üå∏‚¨õ‚¨ú',
                    '‚¨ú‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú‚¨ú',
                    '‚¨ú‚¨ú‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú‚¨ú‚¨ú',
                    '‚¨ú‚¨ú‚¨ú‚¨ú‚¨õüå∏üå∏üå∏üå∏üå∏‚¨õ‚¨ú‚¨ú‚¨ú‚¨ú',
                    '‚¨úüå∏‚¨úüå∏‚¨ú‚¨õüå∏üå∏üå∏‚¨õ‚¨úüå∏‚¨úüå∏‚¨ú',
                    'üå∏üå∏üå∏üå∏üå∏‚¨ú‚¨õüå∏‚¨õ‚¨ú‚¨ú‚¨úüå∏‚¨ú‚¨ú',
                    '‚¨úüå∏üå∏üå∏‚¨ú‚¨ú‚¨ú‚¨õ‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨úüå∏',
                    '‚¨ú‚¨úüå∏‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú‚¨ú'
                ]
            },
            { type: 'message', buttonText: '‡πÑ‡∏õ‡∏ï‡πà‡∏≠', resultText: '‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß... ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' },
            { 
                type: 'input',
                buttonText: '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå',
                promptText: '‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ (‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà ‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å):',
                correctAnswer: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ï‡∏±‡∏ô‡∏´‡∏¢‡∏á‡∏°‡∏±‡∏™' 
            },
            { type: 'final', buttonText: '‡∏Å‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ', resultText: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...' }
        ];
        
        // --- Audio Setup ---
        async function setupAudio() {
            if (audioReady) return true;
            try {
                if (typeof Tone === 'undefined') return false;
                await Tone.start();
                connectSound = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.1, release: 0.1 } }).toDestination();
                errorSound = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.1 } }).toDestination();
                successSound = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.1 } }).toDestination();
                chimeSound = new Tone.PolySynth(Tone.Synth, { envelope: { attack: 0.01, decay: 0.5, sustain: 0.1, release: 0.5 } }).toDestination();
                audioReady = true;
                return true;
            } catch (e) { return false; }
        }
        function playSound(sound, note, duration = '16n') {
            if (!audioReady || !sound) return;
            try { sound.triggerAttackRelease(note, duration); } catch (e) {}
        }

        // --- Init ---
        window.onload = () => {
            heartButton.onclick = async () => { 
                try {
                    if (!audioSetupPromise) audioSetupPromise = setupAudio();
                    await audioSetupPromise;
                } catch (e) {}
                
                bgMusic.play().catch(e => console.log(e));
                
                entryScreen.style.opacity = '0';
                setTimeout(() => { entryScreen.style.display = 'none'; }, 500);
                
                terminalScreen.classList.remove('hidden');
                showNextButton(); 
            };
        };

        // --- Display Functions ---
        function logToTerminal(text, type = 'command') {
            const line = document.createElement('div');
            line.className = 'mb-2 break-words'; 

            if (type === 'command') {
                line.innerHTML = `<span class="text-pink-600 mr-2">&gt;</span>${text}`;
            } else if (type === 'result') {
                line.className += ' text-gray-700';
            } else if (type === 'error') {
                line.className += ' text-red-600';
                line.innerText = text;
                playSound(errorSound, 'C3', '4n');
            } else if (type === 'loader') {
                line.innerHTML = text;
            } else if (type === 'ascii') {
                line.className += ' ascii-art-text'; 
                line.innerText = text;
            } else if (type === 'gallery') {
                line.className += ' gallery-container';
            }
            
            terminal.appendChild(line);
            window.scrollTo(0, document.body.scrollHeight);
            return line;
        }

        function typeWriter(element, text, callback) {
            let i = 0;
            element.innerHTML = ''; 
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                } else {
                    if (callback) callback();
                }
            }
            type();
        }

        function runPercentCounter(startText, endText, callback) {
            const line = logToTerminal(startText, 'result');
            let percent = 0;
            const interval = setInterval(() => {
                percent++;
                line.innerText = `${startText} ${percent}%...`;
                playSound(connectSound, 'C5', '32n');
                if (percent >= 100) {
                    clearInterval(interval);
                    line.innerText = `${startText} ${percent}%... ${endText}`;
                    playSound(chimeSound, ['C5', 'E5', 'G5'], '8n');
                    setTimeout(() => { if (callback) callback(); }, 500); 
                }
            }, 25);
        }
        
        function drawAsciiArt(artArray, callback) {
            let i = 0;
            function drawLine() {
                if (i < artArray.length) {
                    logToTerminal(artArray[i], 'ascii');
                    playSound(connectSound, 'D5', '32n');
                    i++;
                    setTimeout(drawLine, 200); 
                } else {
                    if (callback) callback();
                }
            }
            drawLine();
        }

        function launchConfetti() {
            if (typeof confetti === 'undefined') return;
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const shoot = (origin) => {
                confetti({ ...origin, particleCount: 100, spread: 80, colors: ['#ffc0cb', '#e63946', '#f1a1b4', '#ffffff'] });
            };
            const interval = setInterval(() => {
                if (Date.now() > animationEnd) return clearInterval(interval);
                shoot({ origin: { x: 0, y: 0.7 } });
                shoot({ origin: { x: 1, y: 0.7 } });
            }, 250);
        }

        function showNextButton() {
            const step = storySteps[currentStep];
            if (!step) return; 
            const button = document.createElement('button');
            button.innerText = step.buttonText;
            button.className = 'run-button';
            button.onclick = () => {
                inputArea.classList.add('hidden');
                runCurrentStep();
            };
            inputArea.innerHTML = '';
            inputArea.appendChild(button);
            inputArea.classList.remove('hidden');
        }

        function runCurrentStep() {
            const step = storySteps[currentStep];
            if (!step) return;
            
            // If input type, don't log command yet, wait for modal
            if (step.type !== 'input') {
                logToTerminal(step.buttonText, 'command');
            }

            executeStepAction(step, () => {
                currentStep++;
                if (currentStep < storySteps.length) {
                    showNextButton();
                } else {
                    inputArea.classList.add('hidden');
                }
            });
        }

        function executeStepAction(step, onComplete) {
            if (step.type === 'connect') {
                runPercentCounter("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...", "‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", () => {
                    const line = logToTerminal("", 'result');
                    typeWriter(line, step.resultText, onComplete);
                });
            } 
            else if (step.type === 'message') {
                const line = logToTerminal("", 'result');
                let textToType = step.resultText;
                if (step.buttonText === '‡∏£‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥') {
                    textToType = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏õ‡∏µ 2025... ‡∏û‡∏ö ${storySteps.find(s => s.type === 'gallery').images.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...`;
                }
                typeWriter(line, textToType, onComplete);
            } 
            else if (step.type === 'gallery') {
                const startBulkPreload = () => {
                    return new Promise(resolve => {
                        let loadedCount = 0;
                        let totalImages = step.images.length;
                        const preloadedImages = [];
                        const statusLine = logToTerminal(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ (0/${totalImages})...`, 'result');
                        
                        if (totalImages === 0) return resolve([]);

                        step.images.forEach((src) => {
                            const img = new Image();
                            img.onload = img.onerror = () => {
                                loadedCount++;
                                statusLine.innerText = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ (${loadedCount}/${totalImages})...`;
                                if (img.complete && img.naturalHeight !== 0) preloadedImages.push(img); 
                                else preloadedImages.push({src: src, alt: "Error"});
                                if (loadedCount === totalImages) resolve(preloadedImages.filter(img => img.src)); 
                            };
                            img.src = src;
                        });
                    });
                };

                startBulkPreload().then(preloadedImages => {
                    const galleryContainer = logToTerminal("", 'gallery');
                    let currentImageIndex = 0;

                    galleryContainer.innerHTML = `
                        <div class="gallery-image-wrapper">
                            <img id="galleryImage" class="gallery-image" src="${preloadedImages[0].src}" alt="Memory 1">
                        </div>
                        <div class="gallery-controls flex justify-center mt-2 gap-4">
                            <button id="prevButton" class="gallery-button">&lt; ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                            <span id="imageCounter" class="gallery-counter font-bold text-lg text-pink-600">1 / ${preloadedImages.length}</span>
                            <button id="nextButton" class="gallery-button">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ &gt;</button>
                        </div>
                    `;
                    
                    const imgElement = galleryContainer.querySelector('#galleryImage');
                    const prevButton = galleryContainer.querySelector('#prevButton');
                    const nextButton = galleryContainer.querySelector('#nextButton');
                    const counterElement = galleryContainer.querySelector('#imageCounter');
                    
                    // Style buttons inline
                    const btnStyle = "background:white; color:#e63946; border:1px solid #e63946; padding:5px 10px; border-radius:5px; font-family:monospace;";
                    prevButton.style.cssText = btnStyle;
                    nextButton.style.cssText = btnStyle;
                    prevButton.disabled = true;

                    const updateImage = (index) => {
                        imgElement.style.opacity = '0'; 
                        imgElement.src = preloadedImages[index].src; 
                        setTimeout(() => { imgElement.style.opacity = '1'; }, 50);
                        counterElement.innerText = `${index + 1} / ${preloadedImages.length}`;
                        prevButton.disabled = (index === 0);
                        nextButton.disabled = (index === preloadedImages.length - 1);
                    };

                    prevButton.onclick = () => {
                        if (currentImageIndex > 0) {
                            currentImageIndex--;
                            updateImage(currentImageIndex);
                            playSound(connectSound, 'C5');
                        }
                    };
                    
                    nextButton.onclick = () => {
                        if (currentImageIndex < preloadedImages.length - 1) {
                            currentImageIndex++;
                            updateImage(currentImageIndex);
                            playSound(connectSound, 'E5');
                        }
                    };
                    onComplete();
                });
            }
            else if (step.type === 'ascii') {
                drawAsciiArt(step.asciiArt, onComplete);
            } 
            else if (step.type === 'input') {
                // Show Modal Logic
                modalPrompt.innerText = step.promptText;
                modalInput.value = '';
                modalError.classList.add('hidden');
                modal.classList.remove('hidden');
                setTimeout(() => modalInput.focus(), 100);

                const handleModalSubmit = () => {
                    const answer = modalInput.value.trim();
                    if (answer === step.correctAnswer) {
                        // Correct
                        playSound(successSound, 'G5');
                        modal.classList.add('hidden');
                        logToTerminal(step.buttonText, 'command'); // Log the action now
                        logToTerminal(`‡∏£‡∏´‡∏±‡∏™‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ${answer}`, 'result');
                        modalSubmit.removeEventListener('click', handleModalSubmit); // Clean up
                        onComplete();
                    } else {
                        // Wrong
                        playSound(errorSound, 'C3', '4n');
                        modalError.classList.remove('hidden');
                        modalContent.classList.add('shake');
                        setTimeout(() => modalContent.classList.remove('shake'), 500);
                        modalInput.value = '';
                        modalInput.focus();
                    }
                };

                modalSubmit.onclick = handleModalSubmit;
                // Handle Enter key in modal
                modalInput.onkeydown = (e) => {
                    if (e.key === 'Enter') handleModalSubmit();
                };
            } 
            else if (step.type === 'final') {
                // Fancy Loader for Final Step
                const loaderHtml = `
                <div class="flex flex-col items-center justify-center py-10">
                    <div class="loader-fancy">
                        <div class="container"><div class="carousel"><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div><div class="love"></div></div></div>
                        <div class="container"><div class="carousel"><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div><div class="death"></div></div></div>
                        <div class="container"><div class="carousel"><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div><div class="robots"></div></div></div>
                    </div>
                    <div class="text-pink-600 mt-4 font-bold text-xl">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
                </div>
                `;
                const finalLoader = logToTerminal(loaderHtml, 'loader');
                
                setTimeout(() => {
                    finalLoader.remove();
                    terminal.innerHTML = ''; // Clear screen
                    launchConfetti();
                    
                    // Final Card
                    const finalCardHtml = `
                        <div class="card">
                            <div class="card-image bg-pink-600/30 flex items-center justify-center">
                                <span class="text-6xl animate-pulse">üéÅ</span>
                            </div>
                            <p class="card-title text-[#ffc0cb] mt-4">New Year's Present for My Love</p>
                            <p class="card-body text-gray-300">
                                Happy New Year 2026!<br>
                                ‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏à‡∏∞‡πÑ‡∏Å‡∏•... ‡πÅ‡∏ï‡πà‡πÉ‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏´‡πà‡∏≤‡∏á‡∏ô‡∏∞<br>
                                ‡∏£‡∏±‡∏Å‡∏ô‡∏∞‡∏≠‡∏¥‡∏ô! üíñ
                            </p>
                            <p class="footer">From: <span class="by-name text-[#ffc0cb]">‡∏≠‡∏¥‡∏ô</span></p>
                        </div>
                    `;
                    
                    // Center the final card vertically
                    const wrapper = document.createElement('div');
                    wrapper.className = 'flex items-center justify-center min-h-[80vh]';
                    wrapper.innerHTML = finalCardHtml;
                    terminal.appendChild(wrapper);
                    
                    onComplete(); 
                }, 5000);
            }
        }
    </script>
</body>
</html>
